## 이 리포지토리의 목적 

이 리포지토리는 다음 두 실험을 위한 프로그램을 작성하기 위한 리포지토리이다. 

1. TCP를 사용할 때, 보내는 데이터의 단위에 따라 전송하는 데 걸리는 시간이 얼마나 걸리는 지 측정한다.

3. UDP를 사용할 때, 보내는 데이터의 단위에 따라 에러가 발생하는 정도는 어떻게 변화하는 지 측정한다.


두 실험 모두, 전송하는 데이터의 단위를 500바이트에서 65535바이트까지 변화시켜가며 
1GB의 데이터를 전송한다. 

이상의 실험을 위해 TCP 클라이언트와 서버, UDP 클라이언트와 서버를 제작한다. 

직접 작성하기 전에 간단하게나마 흐름과 기능을 정의하자. 

## TCP - 프로그램 설계 (계획 단계)

### TCP 클라이언트 

클라이언트의 흐름은 다음과 같다. 

1. 전송할 단위 크기 설정
  - 실험에서의 "변수"에 해당한다. 해당 값이 변함에 따라 속도의 차이가 얼마나 나는지 측정해야 한다.

2. 데이터 로드
  - 실험에서 사용하기 위한 파일을 불러온다. 1GB의 파일이다. `FileInputStream` 등을 통해 처리한다.

3. 서버와 연결
  - TCP 소켓을 사용해서 TCP 서버에 연결한다.

4. 데이터 전송 후 시간 측정
  - 전송할 단위 크기별로 3번씩 반복한다.
      - 전송하기 직전에 시작 시간을 기록한다. (`System.nanoTime()`, `System.currentTimeMillis()` 등)
      - 단위 크기만큼 데이터를 읽어서 서버로 전송한다.
      - 전송 완료 시간을 기록한다.
      - (완료 시간 - 시작 시간)을 계산해서 데이터 크기 단위와 계산한 시간을 Map에 기록한다.

5. 서버의 응답을 대기한다.
  - 서버는 자신이 받은 데이터의 바이트 수를 반환한다.

6. 모든 과정이 완료되면, 실험 결과를 파일에 기록한다. 


### TCP 서버 

1. TCP 서버 소켓을 bind 한다.
  - 지정된 포트로 소켓을 연다.
2. 클라이언트가 연결 요청을 하면 수락한다.

3. 데이터를 받는다.
  - 데이터를 받고, 받은 데이터의 바이트 수를 합산한다. (받은 데이터는 필요없으니 버린다.)

4. 파일 전송이 완료되면, 수신된 데이터 크기를 확인하고 응답한다.


## TCP 실험 프로그램 설계 과정 (기록용) 

먼저 사용할 Java 모듈들에 대해 숙지하자. 

먼저 소켓 통신이므로 `ServerSocket`과 `Socket`을 사용한다. (실험이므로, 간단한 IO 기반으로 한다. NIO 기반은 단순 실험으로는 과하다.)

[Java ServerSocket 공식 문서](https://docs.oracle.com/javase/8/docs/api/java/net/ServerSocket.html)

[Java Socket 공식 문서](https://docs.oracle.com/javase/8/docs/api/java/net/Socket.html)

그리고 파일 입출력을 위한 `FileInputStream`, `BufferedWriter` 등의 입출력 관련 스트림과 보조 스트림을 사용한다. 

일단은 클라이언트와 서버 각각 `main` 메소드를 가진 단일 클래스 구조로 한다. 
아직은 단순한 실험이기 때문이다. **나중에 필요하다면 클래스로 분리하고 멀티 스레딩을 도입한다.(스레드 풀 등)**



